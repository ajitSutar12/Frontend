<div class="row">
    <div class="col-12">
        <div class="card">
            <div class="card-header">
                <h5>Recovery Transaction</h5>
            </div>

            <form [formGroup]="angForm" novalidate #myform="ngForm">
                <div class="card-block">
                    <div class="row">
                        <div class="col-sm-12 col-md-1"> <label for="AC_BRANCH">Branch<sub
                                    class="required">*</sub></label></div>
                        <div class="col-sm-12 col-md-3">
                            <div class="form-group form-primary form-static-label">
                                <span class="border-lable-flt">
                                    <ng-select [(ngModel)]="selectedBranch" #scheme formControlName="branch"
                                        bindValue="value" bindLabel="label" (change)="getBranch($event)">
                                        <ng-option *ngFor="let item of branch_code" [value]="item">
                                            {{item.id}} {{item.label}}</ng-option>
                                    </ng-select>
                                </span>
                            </div>
                            <div class="form-group form-primary form-static-label"
                                *ngIf="angForm.controls['branch'].invalid && (angForm.controls['branch'].dirty || angForm.controls['branch'].touched)"
                                class="alert alert-danger">
                                <div *ngIf="angForm.controls['branch'].errors?.required">
                                    This field is required.
                                </div>
                            </div>

                        </div>


                        <div class="col-sm-12 col-md-1"> <label for="AC_BRANCH">Customer Id<sub
                                    class="required">*</sub></label></div>
                        <div class="col-sm-12 col-md-3">
                            <div class="form-group form-primary form-static-label">
                                <span class="border-lable-flt">
                                    <ng-select [(ngModel)]="selectedCId" #scheme formControlName="customerid"
                                        bindValue="value" bindLabel="label" (change)="getcustid($event)">
                                        <ng-option *ngFor="let item of Cust_ID" [value]="item">
                                            {{item.id}} {{item.label}}</ng-option>
                                    </ng-select>
                                </span>
                            </div>
                            <div class="form-group form-primary form-static-label"
                                *ngIf="angForm.controls['customerid'].invalid && (angForm.controls['customerid'].dirty || angForm.controls['customerid'].touched)"
                                class="alert alert-danger">
                                <div *ngIf="angForm.controls['customerid'].errors?.required">
                                    This field is required.
                                </div>
                            </div>

                        </div>


                        <!-- <div class="col-sm">
                            <div class="checkbox checkbox-primary">
                                <div class="border-checkbox-group border-checkbox-group-primary">
                                    <input class="border-checkbox" type="checkbox" id="checkbox1"
                                        (change)="ischecked($event)" [checked]="isIsRestrictTransactionEntry == true"
                                        formControlName="checkActive">
                                    <label class="border-checkbox-label" for="checkbox1">Show only Active
                                        Accounts?</label>
                                </div>
                            </div>
                        </div> -->

                    </div>

                    <div class="row">

                        <div class="col-sm-12 col-md-1"> <label for="AC_BRANCH">Scheme Code<sub
                                    class="required">*</sub></label></div>
                        <div class="col-sm-12 col-md-3">
                            <div class="form-group form-primary form-static-label">
                                <span class="border-lable-flt">
                                    <ng-select [(ngModel)]="selectedScode" #scheme formControlName="scode"
                                        (change)="getIntro($event);getTransferAccountList($event)">
                                        <ng-option *ngFor="let item of schemeCode" [value]="item">
                                            {{item.AC_MEMBTYPE}}</ng-option>
                                    </ng-select>
                                </span>
                            </div>
                            <div class="form-group form-primary form-static-label"
                                *ngIf="angForm.controls['scode'].invalid && (angForm.controls['scode'].dirty || angForm.controls['scode'].touched)"
                                class="alert alert-danger">
                                <div *ngIf="angForm.controls['scode'].errors?.required">
                                    This field is required.
                                </div>
                            </div>

                        </div>

                        <div class="col-sm-12 col-md-1"> <label for="AC_BRANCH">Member Number<sub
                                    class="required">*</sub></label></div>
                        <div class="col-sm-12 col-md-3">
                            <div class="form-group form-primary form-static-label">
                                <span class="border-lable-flt">
                                    <ng-select [(ngModel)]="selectedMemno" #scheme formControlName="memberno"
                                        (change)="getnum($event)">
                                        <ng-option *ngFor="let item of schemeCode" [value]="item">
                                            {{item.AC_MEMBNO}}</ng-option>
                                    </ng-select>
                                </span>
                            </div>
                            <div class="form-group form-primary form-static-label"
                                *ngIf="angForm.controls['memberno'].invalid && (angForm.controls['memberno'].dirty || angForm.controls['memberno'].touched)"
                                class="alert alert-danger">
                                <div *ngIf="angForm.controls['memberno'].errors?.required">
                                    This field is required.
                                </div>
                            </div>

                        </div>
                        <div class="col-sm">
                            <div class="checkbox checkbox-primary">
                                <div class="border-checkbox-group border-checkbox-group-primary">
                                    <input class="border-checkbox" type="checkbox" id="checkbox1"
                                        (change)="ischecked($event)" [checked]="isIsRestrictTransactionEntry == true"
                                        formControlName="checkActive">
                                    <label class="border-checkbox-label" for="checkbox1">Show only Active
                                        Accounts?</label>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-12 col-md-1"> <label for="INSTALLMENT_NO">Total Amount<sub
                                    class="required">*</sub></label></div>
                        <div class="col-sm-12 col-md-3">
                            <div class="form-group input-group">
                                <span class="border-lable-flt">
                                    <input type="text" name="INSTALLMENT_NO" class="form-control" placeholder=" "
                                        id="INSTALLMENT_NO" maxlength="15" formControlName="totalamount1"
                                        [(ngModel)]="TotalAmt"
                                        (keypress)="($event.charCode >= 48 && $event.charCode < 58) || $event.charCode == 47"
                                        (change)="gettotalAmt($event)">
                                </span>
                            </div>
                            <div class="form-group form-primary form-static-label"
                                *ngIf="angForm.controls['totalamount1'].invalid && (angForm.controls['totalamount1'].dirty || angForm.controls['totalamount1'].touched)"
                                class="alert alert-danger">
                                <div
                                    *ngIf="angForm.controls['totalamount1'].errors?.pattern || angForm.controls['totalamount1'].errors?.required || angForm.controls['totalamount1'].errors?.maxlength">
                                    This field is required.
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-12">
                            <div class="solid">

                                <table class="table table-bordered table-hover compact">
                                    <thead>
                                        <td>Scheme Code</td>
                                        <td>Type</td>
                                        <td>Account Number</td>
                                        <td>Scheme Name</td>
                                        <td>Principal</td>
                                        <td>current Interest</td>
                                        <td>payable/receivable</td>
                                        <td>Penal interest</td>
                                        <td>due interest</td>
                                        <td>Naration</td>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let row of tableData">
                                            <td>{{ row.S_APPL }}</td>
                                            <td>{{ row.S_SHRNAME }}</td>
                                            <td>{{ row.acno }}</td>
                                            <td>{{ row.SchemeName }}</td>
                                            <td>{{ row.Principal }}</td>
                                            <td style="text-align: end;">{{row.loanIntamount}}</td>
                                            <td style="text-align: end;">{{ row.INT_RATE_COME }}</td>
                                            <td style="text-align: end;">{{ row.PenaltyInterest }}</td>
                                            <td style="text-align: end;">{{ row.INT_DUE }}</td>
                                            <td>{{ row.Naration }}</td>
                                        </tr>
                                    </tbody>
                                </table>



                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm">
                            <h5>Payment Details:</h5>
                            <div class="row">
                                <div class="col-sm">
                                    <div class="form-radio">
                                        <div class="radio radio-inline">
                                            <label class="inputRadio">
                                                <input type="radio" formControlName="SAVING_PIGMY" name="SAVING_PIGMY"
                                                    value="FormC" id="formT" (change)="isFormA(1);"
                                                    (click)="selectedPaymentType = 'cash'">
                                                <i class="helper"></i>Cash
                                            </label>
                                        </div>
                                        <div class="radio radio-inline">
                                            <label class="inputRadio">
                                                <input type="radio" value="FormT" formControlName="SAVING_PIGMY"
                                                    id="formC" name="SAVING_PIGMY" (change)="isFormA(2)">
                                                <i class="helper"></i>Transfer
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row" id="FORMA" *ngIf="isTransfer">
                                <div class="col-sm-12">
                                    <div class="row">
                                        <div class="col-sm-12 col-md-2"><label for="chequeNo">Cheque
                                                Number</label></div>
                                        <div class="col-md-2">
                                            <div class="form-group input-group">
                                                <span class="border-lable-flt">
                                                    <input type="text" name="chequeNo" class="form-control"
                                                        placeholder=" " id="chequeNo" value=""
                                                        style="text-transform: capitalize;"
                                                        title="Input allowed only  A-Z a-z 0-9 - / . (Space)"
                                                        formControlName="chequeNo" maxlength="10"
                                                        (change)="getcheckNo($event)"
                                                        (keypress)="($event.charCode >= 65 && $event.charCode <= 90)||($event.charCode >= 97 && $event.charCode <= 122) || ($event.charCode >= 48 && $event.charCode < 58)"
                                                        [(ngModel)]="model.chequeNo">
                                                </span>
                                            </div>
                                        </div>
                                        <div class="col-sm-12 col-md-2"><label for="ChequeDate">Cheque
                                                Date</label>
                                        </div>
                                        <div class="col-md-2">
                                            <div class="form-group input-group">
                                                <span class="border-lable-flt">
                                                    <input type="text" placeholder="dd/mm/yyyy" name="CASE_SUITE_DATE"
                                                        id="CASE_SUITE_DATE" class="form-control" appDateValidation
                                                        [bsValue]="bsValue" 
                                                        formControlName="CASE_SUITE_DATE" appButton minlength="10"
                                                        maxlength="10" [bsConfig]="{ dateInputFormat: 'DD/MM/YYYY' }"
                                                        (keypress)="($event.charCode >= 48 && $event.charCode < 58) || $event.charCode == 47"
                                                        bsDatepicker>
                                                </span>
                                            </div>
                                        </div>
                                        <div class="form-group form-primary form-static-label"
                                            *ngIf="angForm.controls['CASE_SUITE_DATE'].invalid &&
                                            (angForm.controls['CASE_SUITE_DATE'].dirty ||angForm.controls['CASE_SUITE_DATE'].touched) " class="alert alert-danger">
                                            <div *ngIf="angForm.controls['CASE_SUITE_DATE'].errors?.required">
                                                This field is required
                                            </div>

                                        </div>

                                    </div>
                                    <div class="row">
                                        <div class="col-sm-12 col-md-2"> <label for="AC_BRANCH">Scheme<sub
                                                    class="required">*</sub></label></div>
                                        <div class="col-sm-12 col-md-4">
                                            <div class="form-group form-primary form-static-label">
                                                <span class="border-lable-flt">
                                                    <ng-select [(ngModel)]="selectedTransScheme"
                                                        [(ngModel)]="model.Tscheme"
                                                        (change)="getTransferAccountList($event)"
                                                        formControlName="Tscheme" bindValue="value" bindLabel="label"
                                                        #tscheme appTheme [selectOnTab]='true'>
                                                        <ng-option *ngFor="let item of Scheme" [value]="item">
                                                            {{item.id}} {{item.label}}</ng-option>
                                                    </ng-select>
                                                </span>
                                            </div>
                                            <div class="form-group form-primary form-static-label"
                                                *ngIf="angForm.controls['Tscheme'].invalid && (angForm.controls['Tscheme'].dirty || angForm.controls['Tscheme'].touched)"
                                                class="alert alert-danger">
                                                <div *ngIf="angForm.controls['Tscheme'].errors?.required">
                                                    This field is required.
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-sm-12 col-md-2"><label for="TschemeAC">Account
                                                Number<sub class="required">*</sub></label></div>
                                        <div class="col-sm-12 col-md-3">
                                            <div class="form-group form-primary form-static-label">
                                                <span class="border-lable-flt">
                                                    <ng-select id="TschemeAC" [(ngModel)]="ngacno" [(ngModel)]="model.TschemeAC"
                                                        formControlName="TschemeAC" bindLabel="label"
                                                        bindValue="bankacno" title="Compulsory Selection"
                                                        placeholder="Account Number" appTheme
                                                        (change)="getTransferAccountDeatil($event)" #taccNumber
                                                        (focus)="onFocus(taccNumber)" [selectOnTab]='true'>
                                                        <ng-option *ngFor="let values of schemeACNo" [value]="values">
                                                            {{values.label}} {{values.name}}
                                                        </ng-option>
                                                    </ng-select>
                                                </span>
                                            </div>
                                            <div class="form-group form-primary form-static-label"
                                                *ngIf="angForm.controls['TschemeAC'].invalid && (angForm.controls['TschemeAC'].dirty || angForm.controls['TschemeAC'].touched)"
                                                class="alert alert-danger">
                                                <div *ngIf="angForm.controls['TschemeAC'].errors?.required">
                                                    This field is required.
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-sm-12 col-md-2"><label for="AC_PARTICULAR">Particulars</label>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group input-group">
                                                <span class="border-lable-flt">
                                                    <textarea class="form-control" formControlName="particulars"
                                                        [(ngModel)]="model.particulars"></textarea>
                                                    <!-- <i class="fa fa-info-circle errspan"></i> -->
                                                </span>
                                            </div>

                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-2"><label for="amount">Amount<sub
                                                    class="required">*</sub></label></div>
                                        <div class="col-md-2">
                                            <div class="form-group input-group">
                                                <span class="border-lable-flt">
                                                    <input style="text-align: right;" type="text" class="form-control"
                                                        name="amount" id="amount" formControlName="amount" appTheme
                                                        [(ngModel)]="model.amount"
                                                        (keypress)="($event.charCode >= 48 && $event.charCode < 58 )|| $event.charCode == 46"
                                                        (change)="geamt($event)">
                                                </span>
                                            </div>
                                        </div>
                                        <div class="col-sm-12 col-md-2"> <label for="INSTALLMENT_NO">Total Amount<sub
                                                    class="required">*</sub></label></div>
                                        <div class="col-sm-12 col-md-2">
                                            <div class="form-group input-group">
                                                <span class="border-lable-flt">
                                                    <input type="text" name="INSTALLMENT_NO" class="form-control"
                                                        placeholder=" " id="INSTALLMENT_NO" maxlength="15"
                                                        formControlName="totalamount2" [(ngModel)]="Totalamount"
                                                        (keypress)="($event.charCode >= 48 && $event.charCode < 58) || $event.charCode == 47"
                                                        (change)="gettotatamt($event)">
                                                </span>
                                            </div>
                                            <!-- <div class="form-group form-primary form-static-label"
                                        *ngIf="angForm.controls['totalamount2'].invalid && (angForm.controls['totalamount2'].dirty || angForm.controls['totalamount1'].touched)"
                                        class="alert alert-danger">
                                        <div
                                            *ngIf="angForm.controls['totalamount2'].errors?.pattern || angForm.controls['totalamount2'].errors?.required || angForm.controls['totalamount1'].errors?.maxlength">
                                            This field is required.
                                        </div>
                                    </div> -->
                                        </div>


                                        <div class="col-md">
                                            <button type="button" class="btn btn-outline-primary btn-sm"
                                                (click)="Add()" *ngIf="showAdd_AC">
                                                Add Account
                                            </button>
                                            <!-- <button type="submit" (click)="onSubmit();onReset();hidecancel=false" *ngIf="hide"
        class="btn btn-primary float-right">Submit</button> -->
                                            <button class="btn btn-outline-primary btn-sm" (click)="updatedata();showAdd_AC=true;jointUpdateShow=false"
                                                *ngIf="jointUpdateShow">
                                                Update Account
                                            </button>
                                        </div>
                                    </div>

                                    <!-- Multiple Transaction details data show here -->
                                    <div class="row">
                                        <div class="col-md-12">
                                            <div class="table-responsive">
                                                <table class="table table-bordered table-hover compact">
                                                    <thead>
                                                        <td>Action</td>
                                                        <td>Scheme</td>
                                                        <td>Account Number</td>

                                                        <td>Particulars</td>
                                                        <td style="text-align: right;">Amount</td>
                                                    </thead>
                                                    <tbody>
                                                        <tr *ngFor="let item of user;let i=index">
                                                            <!-- <td><button (click)="deletedata(item.i)"
                                                                    class="btn btn-danger">delete</button>
                                                                <button (click)="editdata(i);jointUpdateShow=true"
                                                                    class="btn btn-success">Edit</button>
                                                            </td> -->

                                                            <td><span
                                                                class="fa fa-fw fa-trash-o grab" style="color: red;"
                                                                (click)="deletedata(item.i)"></span>
                                                            &nbsp;&nbsp;&nbsp;&nbsp;<span class="fa fa-fw fa-edit field-icon grab" style="color: green;"
                                                                (click)="editdata(i);jointUpdateShow=true;showAdd_AC=false"></span></td>

                                                            <td>{{ item.Tscheme }}</td>
                                                            <td>{{ item.TschemeAC }}</td>
                                                            <td>{{ item.particulars }}</td>
                                                            <td>{{ item.amount }}</td>

                                                        </tr>
                                                    </tbody>
                                                    <!-- 
                                                    <tbody *ngIf="multigrid.length != 0">
                                                        <tr *ngFor="let data of multigrid;
                                                    let indexOfelement = index">
                                                            <td [ngClass]="'td_center'"> <span
                                                                    class="fa fa-fw fa-edit field-icon" id="editbutton"
                                                                    (click)="editTransferAccount(indexOfelement)"
                                                                    placement="top" ngbTooltip="Edit"></span>
                                                            </td>
                                                            <td [ngClass]="'td_right'">{{
                                                                data.Scheme==
                                                                undefined || data.Scheme==null
                                                                ? data.depoCloseTranAc.S_APPL:
                                                                data.Scheme
                                                                }}
                                                            </td>
                                                            <td [ngClass]="'td_right'">{{
                                                                data.TRANSFER_ACNO
                                                                }}
                                                            </td>
                                                            <td>{{ data.NARRATION }}</td>
                                                            <td [ngClass]="'td_right'">{{
                                                                data.TRAN_AMOUNT
                                                                }}
                                                            </td>
                                                        </tr>
                                                        <tr *ngIf="multigrid.length != 0">

                                                            <td colspan="4" style="text-align: right;">Total
                                                            </td>
                                                            <td [ngClass]="'td_right'">
                                                                {{transferTotalAmount}}
                                                            </td>
                                                        </tr>
                                                    </tbody> -->
                                                </table>
                                            </div>
                                        </div>

                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-3">
                            Total Credit : {{TotalAmt}}
                        </div>
                        <div class="col-md-3">
                            Total Debit : {{Totalamount}}
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-12">
                            <button class="btn  btn-outline-primary btn-sm" (click)="close()">Close</button>

                            <button class="btn  btn-outline-primary btn-sm" (click)="reset()">Cancel</button>

                            <button class="btn  btn-outline-primary btn-sm" (click)="submit()"
                                [disabled]="!Submitdis()">Submit</button>

                        </div>
                    </div>

                </div>
            </form>

        </div>
    </div>
</div>